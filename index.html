<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, minimum-scale=1.0, viewport-fit=cover">
    <title>Enhanced Loan Tool</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat+Alternates:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <div class="container">
            <img title="Advance-Corp-Transparent" alt="Advance-Corp-Transparent" nitro-lazy-src="https://cdn-ilaefej.nitrocdn.com/nAyVtvoTraASstdeHrVVRsKyxhGLzErd/assets/images/optimized/rev-7b780e9/advancecommercial.co/wp-content/uploads/elementor/thumbs/Advance-Corp-Transparent-qo4oidbuba165zj8ivz7hqeoslmpj847qmhteo6p60.png" class="lazyloaded logo" decoding="async" nitro-lazy-empty="" id="Mjk4OjIzMg==-1" src="https://cdn-ilaefej.nitrocdn.com/nAyVtvoTraASstdeHrVVRsKyxhGLzErd/assets/images/optimized/rev-7b780e9/advancecommercial.co/wp-content/uploads/elementor/thumbs/Advance-Corp-Transparent-qo4oidbuba165zj8ivz7hqeoslmpj847qmhteo6p60.png" width="100" height="100">
            <input type="checkbox" id="nav-toggle" class="nav-toggle" aria-label="Toggle navigation">
            <label for="nav-toggle" class="nav-toggle-label">
                <span>â˜°</span>
            </label>
            <nav class="nav-menu" role="navigation">
                <!-- Updated links -->
                <a href="https://advancecommercial.co/">Home</a>
                <a href="https://advancecommercial.co/about-us/">About Us</a>
                <a href="https://advancecommercial.co/services/">Services</a>
                <a href="https://theforgekitchens.com/">Kitchen Studio</a>
                <a href="store.html">Store</a>
                <a href="https://advancecommercial.co/contact-us/">Contact Us</a>
                <a href="index.html">Calculator</a>
            </nav>
        </div>
    </header>
    <div id="loan-tool">
        <div class="tool-toggle">
            <button id="prequal-btn" class="active">Pre-Qualification Calculator</button>
            <button id="calculator-btn">Loan Calculator</button>
        </div>

        <div id="calculator-form" class="tool-form hidden">
            <h2>Loan Calculator</h2>
            <label>Loan Amount ($):</label>
            <input type="number" id="loan-amount" min="0" step="0.01" required>
            <label>Annual Interest Rate (%):</label>
            <input type="number" id="interest-rate" min="0" step="0.01" required>
            <label>Loan Term (Years):</label>
            <input type="number" id="loan-term" min="1" step="1" required>
            <button onclick="calculateLoan()">Calculate Payment</button>
            <div id="calculator-result"></div>
        </div>
        
        <div id="prequal-form" class="tool-form">
            <h2>Pre-Qualification Assessment</h2>
            <label>Number of Income Sources:</label>
            <input type="number" id="income-sources" min="1" step="1" required>
            <div id="income-sources-container">
                <label>Monthly Income for Source 1 ($):</label>
                <input type="number" class="income-source" min="0" step="0.01" required>
            </div>
            <label>Total Monthly Income ($):</label>
            <input type="number" id="total-income" min="0" step="0.01" readonly>
            <label>Monthly Expenses ($):</label>
            <input type="number" id="expenses" min="0" step="0.01" required>
            <label>Payments for Existing Monthly Debt ($):</label>
            <input type="number" id="debts" min="0" step="0.01" required>
            <label>Desired Loan Amount ($):</label>
            <input type="number" id="loan-amount-prequal" min="0" step="0.01" required>
            <label>Credit Card Limit ($):</label>
            <input type="number" id="credit-limit" min="0" step="0.01" required>
            <label>Number of Dependents:</label>
            <input type="number" id="dependents" min="0" step="1" required>
            <button onclick="calculatePrequal()">Assess Eligibility</button>
            <div id="prequal-result"></div>
        </div>
    </div>

    <footer style="background-color: #0B1727; color: #FFFFFF; font-family: 'Montserrat Alternates', sans-serif; padding: 2rem 0; width: 100%;">
        <div class="container" style="max-width: 90%; margin: 0 auto; display: flex; flex-wrap: wrap; justify-content: space-between; align-items: flex-start; text-align: left;">
            <!-- Contact Information -->
            <div style="flex: 1; min-width: 200px; margin-bottom: 1rem;">
                <h3 style="font-weight: 700; font-size: clamp(1.2rem, 3vw, 1.5rem); margin-bottom: 0.5rem;">Advance Commercial Equipment Ltd.</h3>
                <p style="font-size: clamp(0.8rem, 2vw, 1rem); margin: 0.25rem 0;">
                    1-5 Chootoo Road, El Socorro Extension,<br>
                    San Juan, Trinidad & Tobago
                </p>
                <p style="font-size: clamp(0.8rem, 2vw, 1rem); margin: 0.25rem 0;">
                    Phone: (868) 638-8992 / (868) 674-7170
                </p>
                <p style="font-size: clamp(0.8rem, 2vw, 1rem); margin: 0.25rem 0;">
                    Email: <a href="mailto:info@advancecommercial.co" style="color: #00FFFF; text-decoration: none;">info@advancecommercial.co</a>
                </p>
                <!-- Social Media Links -->
                <div style="display: flex; gap: 1rem; margin-top: 0.5rem;">
                    <a href="https://www.facebook.com/advancecommercialtt/" style="color: #FFFFFF; font-size: 1.5rem; transition: color 0.3s ease;">
                        <span style="font-family: Arial, sans-serif;">&#xf09a;</span> <!-- Facebook icon -->
                    </a>
                    <a href="https://www.instagram.com/advancecommercialtt/" style="color: #FFFFFF; font-size: 1.5rem; transition: color 0.3s ease;">
                        <span style="font-family: Arial, sans-serif;">&#xf16d;</span> <!-- Instagram icon -->
                    </a>
                    <a href="https://www.linkedin.com/company/advance-commercial-equipment-ltd/" style="color: #FFFFFF; font-size: 1.5rem; transition: color 0.3s ease;">
                        <span style="font-family: Arial, sans-serif;">&#xf0e1;</span> <!-- LinkedIn icon -->
                    </a>
                    <a href="https://twitter.com/AdvanceCommTT" style="color: #FFFFFF; font-size: 1.5rem; transition: color 0.3s ease;">
                        <span style="font-family: Arial, sans-serif;">&#xf099;</span> <!-- Twitter icon -->
                    </a>
                </div>
            </div>
            <!-- Navigation Links -->
            <div style="flex: 1; min-width: 200px; margin-bottom: 1rem;">
                <h3 style="font-weight: 700; font-size: clamp(1.2rem, 3vw, 1.5rem); margin-bottom: 0.5rem;">Quick Links</h3>
                <ul style="list-style: none; padding: 0;">
                    <li style="margin: 0.25rem 0;"><a href="https://advancecommercial.co/" style="color: #FFFFFF; text-decoration: none; font-size: clamp(0.8rem, 2vw, 1rem);">Home</a></li>
                    <li style="margin: 0.25rem 0;"><a href="https://advancecommercial.co/about-us/" style="color: #FFFFFF; text-decoration: none; font-size: clamp(0.8rem, 2vw, 1rem);">About Us</a></li>
                    <li style="margin: 0.25rem 0;"><a href="https://advancecommercial.co/services/" style="color: #FFFFFF; text-decoration: none; font-size: clamp(0.8rem, 2vw, 1rem);">Services</a></li>
                    <li style="margin: 0.25rem 0;"><a href="https://theforgekitchens.com/" style="color: #FFFFFF; text-decoration: none; font-size: clamp(0.8rem, 2vw, 1rem);">Kitchen Studio</a></li>
                    <li style="margin: 0.25rem 0;"><a href="store.html" style="color: #FFFFFF; text-decoration: none; font-size: clamp(0.8rem, 2vw, 1rem);">Store</a></li>
                    <li style="margin: 0.25rem 0;"><a href="https://advancecommercial.co/contact-us/" style="color: #FFFFFF; text-decoration: none; font-size: clamp(0.8rem, 2vw, 1rem);">Contact Us</a></li>
                    <li style="margin: 0.25rem 0;"><a href="index.html" style="color: #FFFFFF; text-decoration: none; font-size: clamp(0.8rem, 2vw, 1rem);">Calculator</a></li>
                </ul>
            </div>
            <!-- Newsletter Signup -->
            <div style="flex: 1; min-width: 200px; margin-bottom: 1rem;">
                <h3 style="font-weight: 700; font-size: clamp(1.2rem, 3vw, 1.5rem); margin-bottom: 0.5rem;">Newsletter Signup</h3>
                <form style="display: flex; flex-direction: column; gap: 0.5rem;">
                    <input type="email" placeholder="Enter your email" style="padding: 0.5rem; border: 1px solid #d1d5db; border-radius: 0.375rem; width: 100%; font-size: clamp(0.8rem, 2vw, 1rem); background-color: #ffffff;" required>
                    <button type="submit" style="padding: 0.5rem 1rem; background-color: #00FFFF; color: #0B1727; border: none; border-radius: 0.375rem; cursor: pointer; font-size: clamp(0.8rem, 2vw, 1rem); min-height: 44px;">Join Now</button>
                </form>
            </div>
            <!-- Terms and Conditions -->
            <div class="terms-conditions" style="width: 100%; margin-top: 1rem;">
                <div id="terms-content" class="terms-content">
                    <h4 style="font-size: clamp(1rem, 2.5vw, 1.1rem); font-weight: 700; margin-bottom: 0.5rem;">Terms and Conditions</h4>
                    <p>
                        Welcome to our Loan Tool. By using this tool, you agree to the following terms and conditions:
                        <br><br>
                        1. <strong>Accuracy of Information</strong>: All information provided through this tool is for informational purposes only. It does not constitute financial advice or a loan offer.
                        <br>
                        2. <strong>User Responsibility</strong>: You are responsible for ensuring the accuracy of the data entered. Inaccurate inputs may lead to incorrect results.
                        <br>
                        3. <strong>Limitation of Liability</strong>: Advance Commercial Co. is not liable for any decisions made based on the results of this tool.
                        <br>
                        4. <strong>Privacy</strong>: We do not store or share any personal information entered into this tool unless explicitly stated.
                        <br>
                        5. <strong>Changes to Terms</strong>: We reserve the right to modify these terms at any time without prior notice.
                        <br><br>
                        Please contact us at info@advancecommercial.co for any questions regarding these terms.
                    </p>
                </div>
            </div>
        </div>
        <!-- Horizontal Rule and Copyright -->
        <hr style="border: 0; border-top: 1px solid #FFFFFF; margin: 1rem 0; width: 100%;">
        <div class="container" style="max-width: 90%; margin: 0 auto; text-align: center;">
            <p style="font-size: clamp(0.8rem, 2vw, 1rem); margin: 0;">
                &copy; 2025 Advance Commercial Equipment Ltd. All Rights Reserved.
            </p>
        </div>
    </footer>
    <script>
        // Initialize event listeners when the DOM is fully loaded
        document.addEventListener('DOMContentLoaded', function() {
            const prequalBtn = document.getElementById('prequal-btn');
            const calculatorBtn = document.getElementById('calculator-btn');
            const prequalForm = document.getElementById('prequal-form');
            const calculatorForm = document.getElementById('calculator-form');
            const incomeSourcesInput = document.getElementById('income-sources');
            const incomeSourcesContainer = document.getElementById('income-sources-container');
            const totalIncome = document.getElementById('total-income');
            const navToggle = document.getElementById('nav-toggle');
            const navLinks = document.querySelectorAll('.nav-menu a');

            // Handle click on Pre-Qualification button to show its form
            prequalBtn.addEventListener('click', () => {
                prequalBtn.classList.add('active');
                calculatorBtn.classList.remove('active');
                prequalForm.classList.remove('hidden');
                calculatorForm.classList.add('hidden');
            });

            // Handle click on Loan Calculator button to show its form
            calculatorBtn.addEventListener('click', () => {
                calculatorBtn.classList.add('active');
                prequalBtn.classList.remove('active');
                calculatorForm.classList.remove('hidden');
                prequalForm.classList.add('hidden');
            });

            // Update income input fields when the number of sources changes
            incomeSourcesInput.addEventListener('input', updateIncomeFields);

            // Close navigation menu when any nav link is clicked
            navLinks.forEach(link => {
                link.addEventListener('click', () => {
                    navToggle.checked = false;
                });
            });

            // Initialize income fields on page load
            updateIncomeFields();
        });

        // Dynamically generate input fields for income sources based on user input
        function updateIncomeFields() {
            const numSources = parseInt(document.getElementById('income-sources').value) || 1;
            const incomeSourcesContainer = document.getElementById('income-sources-container');
            incomeSourcesContainer.innerHTML = ''; // Clear existing fields

            // Create input fields for each income source
            for (let i = 1; i <= numSources; i++) {
                const label = document.createElement('label');
                label.textContent = `Monthly Income for Source ${i} ($):`;
                label.className = 'font-semibold';
                const input = document.createElement('input');
                input.type = 'number';
                input.className = 'income-source';
                input.min = '0';
                input.step = '0.01';
                input.required = true;
                input.style.width = '100%';
                incomeSourcesContainer.appendChild(label);
                incomeSourcesContainer.appendChild(input);
            }

            // Add event listeners to update total income when inputs change
            const incomeInputs = document.querySelectorAll('.income-source');
            incomeInputs.forEach(input => {
                input.addEventListener('input', updateTotalIncome);
            });

            // Update total income immediately after creating fields
            updateTotalIncome();
        }

        // Calculate and display the total monthly income from all sources
        function updateTotalIncome() {
            const incomeInputs = document.querySelectorAll('.income-source');
            const totalIncome = document.getElementById('total-income');
            let total = 0;
            incomeInputs.forEach(input => {
                total += parseFloat(input.value) || 0; // Sum valid inputs, treat invalid as 0
            });
            totalIncome.value = total.toFixed(2); // Display total with 2 decimal places
        }

        // Assess loan eligibility based on financial inputs
        function calculatePrequal() {
            const incomeSources = parseInt(document.getElementById('income-sources').value);
            const totalIncome = parseFloat(document.getElementById('total-income').value);
            const expenses = parseFloat(document.getElementById('expenses').value);
            const debts = parseFloat(document.getElementById('debts').value);
            const loanAmount = parseFloat(document.getElementById('loan-amount-prequal').value);
            const creditLimit = parseFloat(document.getElementById('credit-limit').value);
            const dependents = parseInt(document.getElementById('dependents').value);
            const resultDiv = document.getElementById('prequal-result');
            const incomeInputs = document.querySelectorAll('.income-source');

            // Validate all inputs
            let valid = true;
            incomeInputs.forEach(input => {
                if (isNaN(parseFloat(input.value))) valid = false;
            });

            // Check for invalid or missing inputs
            if (!valid || isNaN(incomeSources) || isNaN(totalIncome) || 
                isNaN(expenses) || isNaN(debts) || isNaN(loanAmount) || 
                isNaN(creditLimit) || isNaN(dependents)) {
                resultDiv.innerHTML = 'Please enter valid numbers for all fields.';
                return;
            }

            // Calculate Debt-to-Income (DTI) ratio
            const dti = ((debts + expenses) / totalIncome) * 100;
            let status = '';
            let riskScore = 0;

            // Adjust risk score based on dependents, income sources, credit limit, and loan amount
            riskScore += dependents * 5;
            riskScore -= incomeSources * 5;
            if (creditLimit >= 10000) riskScore -= 10;
            if (loanAmount > totalIncome * 12) riskScore += 10;

            // Determine eligibility based on DTI and risk score
            if (dti <= 36 && riskScore <= 10) {
                status = 'Good - You are likely to qualify for a loan (DTI: ' + dti.toFixed(2) + '%).';
            } else if (dti <= 43 && riskScore <= 20) {
                status = 'Moderate - You may qualify for some loans (DTI: ' + dti.toFixed(2) + '%).';
            } else {
                status = 'High - Loan qualification may be difficult (DTI: ' + dti.toFixed(2) + '%).';
            }

            // Display result with DTI and risk score
            resultDiv.innerHTML = 'Debt-to-Income Ratio: ' + status + ' (Risk Score: ' + riskScore + ')';
        }

        // Calculate monthly loan payment based on loan amount, interest rate, and term
        function calculateLoan() {
            const amount = parseFloat(document.getElementById('loan-amount').value);
            const rate = parseFloat(document.getElementById('interest-rate').value) / 100 / 12; // Monthly rate
            const term = parseFloat(document.getElementById('loan-term').value) * 12; // Total months
            const resultDiv = document.getElementById('calculator-result');

            // Validate inputs
            if (isNaN(amount) || isNaN(rate) || isNaN(term)) {
                resultDiv.innerHTML = 'Please enter valid numbers for all fields.';
                return;
            }

            // Calculate monthly payment using the amortization formula
            const monthlyPayment = (amount * rate * Math.pow(1 + rate, term)) / (Math.pow(1 + rate, term) - 1);
            resultDiv.innerHTML = 'Monthly Payment: $' + monthlyPayment.toFixed(2); // Display with 2 decimal places
        }
    </script>
</body>
</html>
